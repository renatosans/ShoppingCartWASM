
@inject Modal modalRef;

<div class='vertical-container rounded-corners'>
    <img class='productImage' src='@produto.imagem' >
    <span> @produto.nome </span> <br/>
    <span> @produto.descricao </span> <br/>
    <span> Preço: R$ @produto.preco</span> <br/>
    <button class='roundIcon addToCart' @onclick="addToCart" />
</div>

<Modal @ref="modalRef">
    <ModalContent Centered>
        <ModalHeader>
            <ModalTitle>Informação</ModalTitle>
        </ModalHeader>
        <ModalBody>
            Produto adicionado ao carrinho.
        </ModalBody>
        <ModalFooter>
            <Button Color="Color.Primary" Clicked="@HideModal">OK</Button>
            <Button Color="Color.Secondary" Clicked="@HideModal">Close</Button>
        </ModalFooter>
    </ModalContent>
</Modal>

@code {
    [Parameter]
    public Produto? produto { get; set; }

    [Parameter]
    public ShoppingCart? shoppingCart { get; set; }

    private Task ShowModal()
    {
        return modalRef.Show();
    }

    private Task HideModal()
    {
        return modalRef.Hide();
    }
    private void addToCart()
    {
        if (produto is null) return;
        if (shoppingCart is null) return;

        shoppingCart.adicionar(produto);

        ShowModal();
    }
}
